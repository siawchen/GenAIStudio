{
  "nodes": [
    {
      "id": "file_input_0",
      "position": {
        "x": 311,
        "y": 231
      },
      "type": "customNode",
      "data": {
        "label": "File Input",
        "name": "file_input",
        "version": 1,
        "type": "UploadFile",
        "icon": "/usr/src/packages/server/src/nodes/assets/controls.png",
        "category": "Controls",
        "description": "User Input from File Upload",
        "baseClasses": [
          "UploadFile"
        ],
        "tags": [
          "OPEA"
        ],
        "inMegaservice": false,
        "filePath": "/usr/src/packages/server/src/nodes/file_input.js",
        "inputAnchors": [],
        "inputParams": [],
        "inputs": {},
        "outputs": {},
        "outputAnchors": [
          {
            "id": "file_input_0-output-file_input-UploadFile",
            "name": "file_input",
            "label": "UploadFile",
            "description": "User Input from File Upload",
            "type": "UploadFile"
          }
        ],
        "id": "file_input_0",
        "selected": false
      },
      "width": 300,
      "height": 143,
      "selected": false,
      "positionAbsolute": {
        "x": 311,
        "y": 231
      },
      "dragging": false
    },
    {
      "id": "opea_service@asr_0",
      "position": {
        "x": 682.5990163687969,
        "y": 220.73967426705767
      },
      "type": "customNode",
      "data": {
        "label": "Audio and Speech Recognition Whisper",
        "name": "opea_service@asr",
        "version": 1,
        "type": "AudioTranscriptionResponse",
        "icon": "/usr/src/packages/server/src/nodes/assets/embeddings.png",
        "category": "Audio and Speech Recognition",
        "description": "Transcribe audio and video files using OpenAI Whisper model. Supports various audio formats including mp3, wav, and mp4.",
        "baseClasses": [
          "AudioTranscriptionResponse",
          "DocSumChatCompletionRequest"
        ],
        "tags": [
          "OPEA"
        ],
        "inMegaservice": true,
        "dependent_services": {
          "whisper": {
            "huggingFaceToken": ""
          }
        },
        "inputs": {
          "file": "{{file_input_0.data.instance}}",
          "huggingFaceToken": ""
        },
        "filePath": "/usr/src/packages/server/src/nodes/asr.js",
        "inputAnchors": [
          {
            "label": "Audio or Video File",
            "name": "file",
            "type": "UploadFile",
            "id": "opea_service@asr_0-input-file-UploadFile"
          }
        ],
        "inputParams": [
          {
            "label": "HuggingFace Token",
            "name": "huggingFaceToken",
            "type": "password",
            "optional": true,
            "id": "opea_service@asr_0-input-huggingFaceToken-password"
          }
        ],
        "outputs": {},
        "outputAnchors": [
          {
            "id": "opea_service@asr_0-output-opea_service@asr-AudioTranscriptionResponse|DocSumChatCompletionRequest",
            "name": "opea_service@asr",
            "label": "AudioTranscriptionResponse",
            "description": "Transcribe audio and video files using OpenAI Whisper model. Supports various audio formats including mp3, wav, and mp4.",
            "type": "AudioTranscriptionResponse | DocSumChatCompletionRequest"
          }
        ],
        "id": "opea_service@asr_0",
        "selected": false
      },
      "width": 300,
      "height": 329,
      "selected": false,
      "positionAbsolute": {
        "x": 682.5990163687969,
        "y": 220.73967426705767
      },
      "dragging": false
    },
    {
      "id": "opea_service@llm_docsum_0",
      "position": {
        "x": 1108.64725623794,
        "y": 119.44827891119263
      },
      "type": "customNode",
      "data": {
        "label": "LLM Document Summarization",
        "name": "opea_service@llm_docsum",
        "version": 1,
        "type": "GeneratedDoc",
        "icon": "/usr/src/packages/server/src/nodes/assets/llm.png",
        "category": "LLM",
        "description": "LLM Document Summarization Inference",
        "baseClasses": [
          "GeneratedDoc",
          "StreamingResponse"
        ],
        "tags": [
          "OPEA"
        ],
        "inMegaservice": true,
        "dependent_services": {
          "tgi": {
            "modelName": "",
            "huggingFaceToken": ""
          }
        },
        "inputs": {
          "text": "{{opea_service@asr_0.data.instance}}",
          "modelName": "Intel/neural-chat-7b-v3-3",
          "huggingFaceToken": "",
          "max_tokens": 17,
          "top_k": 10,
          "top_p": 0.95,
          "typical_p": 0.95,
          "temperature": 0.01,
          "presence_penalty": 1.03,
          "frequency_penalty": "",
          "streaming": true,
          "chat_template": "### You are a helpful, respectful and honest assistant to help the user with questions.\n### Context: {context}\n### Question: {question}\n### Answer:"
        },
        "filePath": "/usr/src/packages/server/src/nodes/llm_docsum.js",
        "inputAnchors": [
          {
            "label": "LLM Params Document",
            "name": "text",
            "type": "LLMParamsDoc|DocSumChatCompletionRequest",
            "id": "opea_service@llm_docsum_0-input-text-LLMParamsDoc|DocSumChatCompletionRequest"
          }
        ],
        "inputParams": [
          {
            "label": "Model Name",
            "name": "modelName",
            "type": "string",
            "default": "Intel/neural-chat-7b-v3-3",
            "id": "opea_service@llm_docsum_0-input-modelName-string"
          },
          {
            "label": "HuggingFace Token",
            "name": "huggingFaceToken",
            "type": "password",
            "optional": true,
            "id": "opea_service@llm_docsum_0-input-huggingFaceToken-password"
          },
          {
            "label": "Maximum Tokens",
            "name": "max_tokens",
            "type": "number",
            "default": 17,
            "optional": true,
            "additionalParams": true,
            "id": "opea_service@llm_docsum_0-input-max_tokens-number"
          },
          {
            "label": "Top K",
            "name": "top_k",
            "type": "number",
            "default": 10,
            "optional": true,
            "additionalParams": true,
            "id": "opea_service@llm_docsum_0-input-top_k-number"
          },
          {
            "label": "Top P",
            "name": "top_p",
            "type": "number",
            "default": 0.95,
            "optional": true,
            "additionalParams": true,
            "id": "opea_service@llm_docsum_0-input-top_p-number"
          },
          {
            "label": "Typical P",
            "name": "typical_p",
            "type": "number",
            "default": 0.95,
            "optional": true,
            "additionalParams": true,
            "id": "opea_service@llm_docsum_0-input-typical_p-number"
          },
          {
            "label": "Temperature",
            "name": "temperature",
            "type": "number",
            "default": 0.01,
            "optional": true,
            "additionalParams": true,
            "id": "opea_service@llm_docsum_0-input-temperature-number"
          },
          {
            "label": "Presence Penalty",
            "name": "presence_penalty",
            "type": "number",
            "default": 1.03,
            "optional": true,
            "additionalParams": true,
            "id": "opea_service@llm_docsum_0-input-presence_penalty-number"
          },
          {
            "label": "Frequency Penalty",
            "name": "frequency_penalty",
            "type": "number",
            "default": 0,
            "optional": true,
            "additionalParams": true,
            "id": "opea_service@llm_docsum_0-input-frequency_penalty-number"
          },
          {
            "label": "Streaming",
            "name": "streaming",
            "type": "boolean",
            "default": true,
            "optional": true,
            "additionalParams": true,
            "id": "opea_service@llm_docsum_0-input-streaming-boolean"
          },
          {
            "label": "Chat Template",
            "name": "chat_template",
            "type": "string",
            "rows": true,
            "default": "### You are a helpful, respectful and honest assistant to help the user with questions.\n### Context: {context}\n### Question: {question}\n### Answer:",
            "optional": true,
            "additionalParams": true,
            "id": "opea_service@llm_docsum_0-input-chat_template-string"
          }
        ],
        "outputs": {},
        "outputAnchors": [
          {
            "id": "opea_service@llm_docsum_0-output-opea_service@llm_docsum-GeneratedDoc|StreamingResponse",
            "name": "opea_service@llm_docsum",
            "label": "GeneratedDoc",
            "description": "LLM Document Summarization Inference",
            "type": "GeneratedDoc | StreamingResponse"
          }
        ],
        "id": "opea_service@llm_docsum_0",
        "selected": false
      },
      "width": 300,
      "height": 481,
      "selected": false,
      "positionAbsolute": {
        "x": 1108.64725623794,
        "y": 119.44827891119263
      },
      "dragging": false
    },
    {
      "id": "chat_completion_0",
      "position": {
        "x": 1496.5085721388793,
        "y": 195.25842213672294
      },
      "type": "customNode",
      "data": {
        "label": "Chat Completion",
        "name": "chat_completion",
        "version": 1,
        "type": "ChatCompletion",
        "icon": "/usr/src/packages/server/src/nodes/assets/controls.png",
        "category": "Controls",
        "description": "Send Chat Response to UI",
        "baseClasses": [],
        "tags": [
          "OPEA"
        ],
        "inMegaservice": false,
        "inputs": {
          "llm_response": "{{opea_service@llm_docsum_0.data.instance}}",
          "ui_choice": "summary"
        },
        "hideOutput": true,
        "filePath": "/usr/src/packages/server/src/nodes/chat_completion.js",
        "inputAnchors": [
          {
            "label": "LLM Response",
            "name": "llm_response",
            "type": "StreamingResponse|ChatCompletion",
            "id": "chat_completion_0-input-llm_response-StreamingResponse|ChatCompletion"
          }
        ],
        "inputParams": [
          {
            "label": "UI Choice",
            "name": "ui_choice",
            "type": "options",
            "default": "chat",
            "options": [
              {
                "name": "chat",
                "label": "Chat Q&A"
              },
              {
                "name": "summary",
                "label": "Summarize Content"
              },
              {
                "name": "code",
                "label": "Generate Code"
              }
            ],
            "id": "chat_completion_0-input-ui_choice-options"
          }
        ],
        "outputs": {},
        "outputAnchors": [],
        "id": "chat_completion_0",
        "selected": false
      },
      "width": 300,
      "height": 239,
      "selected": false,
      "dragging": false,
      "positionAbsolute": {
        "x": 1496.5085721388793,
        "y": 195.25842213672294
      }
    }
  ],
  "edges": [
    {
      "source": "file_input_0",
      "sourceHandle": "file_input_0-output-file_input-UploadFile",
      "target": "opea_service@asr_0",
      "targetHandle": "opea_service@asr_0-input-file-UploadFile",
      "type": "buttonedge",
      "id": "file_input_0-file_input_0-output-file_input-UploadFile-opea_service@asr_0-opea_service@asr_0-input-file-UploadFile"
    },
    {
      "source": "opea_service@asr_0",
      "sourceHandle": "opea_service@asr_0-output-opea_service@asr-AudioTranscriptionResponse|DocSumChatCompletionRequest",
      "target": "opea_service@llm_docsum_0",
      "targetHandle": "opea_service@llm_docsum_0-input-text-LLMParamsDoc|DocSumChatCompletionRequest",
      "type": "buttonedge",
      "id": "opea_service@asr_0-opea_service@asr_0-output-opea_service@asr-AudioTranscriptionResponse|DocSumChatCompletionRequest-opea_service@llm_docsum_0-opea_service@llm_docsum_0-input-text-LLMParamsDoc|DocSumChatCompletionRequest"
    },
    {
      "source": "opea_service@llm_docsum_0",
      "sourceHandle": "opea_service@llm_docsum_0-output-opea_service@llm_docsum-GeneratedDoc|StreamingResponse",
      "target": "chat_completion_0",
      "targetHandle": "chat_completion_0-input-llm_response-StreamingResponse|ChatCompletion",
      "type": "buttonedge",
      "id": "opea_service@llm_docsum_0-opea_service@llm_docsum_0-output-opea_service@llm_docsum-GeneratedDoc|StreamingResponse-chat_completion_0-chat_completion_0-input-llm_response-StreamingResponse|ChatCompletion"
    }
  ]
}